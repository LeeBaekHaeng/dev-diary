# 도커 설치

## 버추얼박스
- https://www.virtualbox.org/
- https://www.virtualbox.org/wiki/Downloads
- VirtualBox-7.1.4-165100-Win.exe

## 로키 리눅스 (Rocky Linux)
- https://rockylinux.org/ko-KR
- https://rockylinux.org/ko-KR/download
  - Rocky Linux 9
    - v9.4
    - Rocky-9.4-x86_64-dvd.iso
    - Rocky-9.4-x86_64-minimal.iso
  - Rocky Linux 8
    - v8.10
    - Rocky-8.10-x86_64-dvd1.iso
    - Rocky-8.10-x86_64-minimal.iso
  - Archived Releases
    - https://dl.rockylinux.org/vault/rocky/
    - https://dl.rockylinux.org/vault/rocky/8.9/isos/x86_64/
    - https://dl.rockylinux.org/vault/rocky/9.4/isos/x86_64/

네트워크 구성(Network Configuration)
```
BOOTPROTO=none
IPADDR=192.168.200.200
NETMASK=255.255.255.0
GATEWAY=192.168.200.1
DNS1=168.126.63.1
DNS2=168.126.63.2
```
https://docs.rockylinux.org/guides/network/basic_network_configuration/

/etc/sysconfig/network-scripts
ifcfg-enp0s3
```
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
#BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=eui64
NAME=enp0s3
UUID=0ef2536d-c905-44c3-9624-cd20b0fb47a5
DEVICE=enp0s3
ONBOOT=yes

BOOTPROTO=none
IPADDR=192.168.200.200
NETMASK=255.255.255.0
GATEWAY=192.168.200.1
DNS1=168.126.63.1
DNS2=168.126.63.2

```

/etc
resolv.conf
```
# Generated by NetworkManager
nameserver 168.126.63.1
nameserver 168.126.63.2

```

## 우분투
- https://ubuntu.com/
- https://ubuntu.com/download/server
- Ubuntu 24.04.1 LTS
- ubuntu-24.04.1-live-server-amd64.iso
- 대체 다운로드 ›(Alternative downloads)
  - https://launchpad.net/ubuntu/+mirror/ftp.kaist.ac.kr-release
  - https://ftp.kaist.ac.kr/ubuntu-cd/
  - https://ftp.kaist.ac.kr/ubuntu-cd/24.04.1/
- https://releases.ubuntu.com/
  - LTS Releases
    - Ubuntu 24.04.1 LTS (Noble Numbat)
    - Ubuntu 22.04.5 LTS (Jammy Jellyfish)
    - Ubuntu 20.04.6 LTS (Focal Fossa)
- https://help.ubuntu.com/
- https://ubuntu.com/server/docs
- https://ubuntu.com/server/docs/how-to

네트워크 구성(Configuring networks)
- https://ubuntu.com/server/docs/configuring-networks#static-ip-address-assignment

고정 IP 주소 할당
- Static IP address assignment
```
network:
  version: 2
  renderer: networkd
  ethernets:
    eth0:
      addresses:
        - 192.168.200.205/24
      routes:
        - to: default
          via: 192.168.200.1
      nameservers:
          search: [mydomain, otherdomain]
          addresses: [168.126.63.1, 168.126.63.2]
```

그런 다음 netplan 명령을 사용하여 구성을 적용할 수 있습니다.
- The configuration can then be applied using the netplan command.
```
sudo netplan apply
```

## 로키 리눅스 (Rocky Linux v8.10)에 Docker 엔진 설치(Install Docker Engine on Rocky Linux v8.10)
CentOS에 Docker 엔진 설치(Install Docker Engine on CentOS)
- https://docs.docker.com/engine/install/centos/

이전 버전 제거(Uninstall old versions)
```
sudo dnf remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
```

저장소 설정(Set up the repository)
```
sudo dnf -y install dnf-plugins-core
sudo dnf config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
```

Docker 패키지를 설치합니다.(Install the Docker packages.)
```
sudo dnf -y install docker-ce
```

Docker Engine을 시작합니다.(Start Docker Engine.)
```
sudo systemctl enable --now docker
```

이미지를 실행하여 설치가 성공적으로 완료되었는지 확인하세요 hello-world.(Verify that the installation is successful by running the hello-world image:)
```
sudo docker run hello-world
```

사용자 추가
```
adduser god
```

god 사용자의 비밀 번호 변경
```
passwd god
```

god 사용자로 로그인
```
su - god
```

```
sudo docker run hello-world
```

```
[god@localhost ~]$ sudo docker run hello-world

로컬 시스템 관리자에게 일반적인 지침을 받았으리라 믿습니다.
보통 세가지로 요약합니다:

    #1) 타인의 사생활을 존중하십시오.
    #2) 입력하기 전에 한 번 더 생각하십시오.
    #3) 막강한 힘에는 상당한 책임이 뒤따릅니다.

[sudo] god의 암호:
god은(는) sudoers 설정 파일에 없습니다.  이 시도를 보고합니다.
[god@localhost ~]$

```

wheel 그룹에 god 사용자 추가
```
su - root
sudo usermod -aG wheel god
```

```
[root@localhost ~]# id god
uid=1000(god) gid=1000(god) groups=1000(god)
[root@localhost ~]# sudo usermod -aG wheel god
[root@localhost ~]# id god
uid=1000(god) gid=1000(god) groups=1000(god),10(wheel)
[root@localhost ~]#

```

```
docker run hello-world
```

```
[god@localhost ~]$ docker run hello-world
docker: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Head "http://%2Fvar%2Frun%2Fdocker.sock/_ping": dial unix /var/run/docker.sock: connect: permission denied.
See 'docker run --help'.
[god@localhost ~]$

```

docker 그룹에 god 사용자 추가
- su - god
```
sudo usermod -aG docker $USER
```

su - root
```
sudo usermod -aG docker god
```

Docker Engine을 위한 Linux 설치 후 단계(Linux post-installation steps for Docker Engine)
- https://docs.docker.com/engine/install/linux-postinstall/

사용자를 docker그룹에 추가합니다.(Add your user to the docker group.)
```
sudo usermod -aG docker $USER
```

로그아웃했다가 다시 로그인하여 그룹 멤버십을 다시 평가하세요.(Log out and log back in so that your group membership is re-evaluated.)
```
newgrp docker
```

docker. 없이 명령을 실행할 수 있는지 확인하세요 sudo.(Verify that you can run docker commands without sudo.)
```
docker run hello-world
```
